#version 330

// from vertex
in vec4 color;
in vec2 uv;

// Fragment uniforms
uniform vec3 ambientColor = vec3(0.5, 0.5, 0.5);
uniform sampler2D textureSampler;

// Returns lightning model 
vec3 LightModel()
{
	// TODO: Do diffuse & specular mapping
	return clamp(ambientColor, 0.0, 1.0);
}

void main() 
{
	// For now this just means there is no texture so render it with no texture
	if(uv.x == -1 && uv.y == -1) { 
		gl_FragColor = vec4(color.rgb * LightModel(), 1);
        }
	else {
		gl_FragColor = texture(textureSampler, uv) * vec4(color.rgb, 1);

		//if(gl_FragColor.a < 0.3){
		//	discard;
		//}
	}
}